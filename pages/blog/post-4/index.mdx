import BlogPost from "../../../components/BlogPost";
import Image from "next/image";

export const meta = {
  author: "Oliver Lopez",
  title: "Creating a Contact Form with Next.js and Formspree",
  description:
    "The fastest way to create a contact form for your Next.js website",
  date: "Jul 23, 2021",
  readTime: 6,
};

export default ({ children }) => <BlogPost meta={meta}>{children}</BlogPost>;

<Image
  src={"/static/images/blog_img/nextjs-and-formspree/next_formspree_banner.svg"}
  alt={"Next.js and Formspree"}
  layout="responsive"
  width={500}
  height={150}
/>

<blockquote className="break-words text-md text-left leading-relaxed">
  <i>
    “Focusing on the front-end is the most customer-obsessive way to build your
    products.” — <span>Guillermo Rauch, CEO Vercel</span>
  </i>
  {/* <i>
    Only end-users make your app succeed and they don't how your app was built,
    they just care about how the final product looks.
  </i> */}
</blockquote>

<h2 className="mt-6 text-2xl font-bold">Why use this solution?</h2>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Sometimes you are under pressure building a client's website or a project and
  you find in the situation where saving time is essential. I was trying
  different solutions for small and simple contact form integration and I have
  to say that Formspree is the quickest and easiest way to get your contact
  forms up and running. Their simplicity in their React API really makes a good
  developer experience when is combined with Next.js. Let's see this in action.
</p>

<h2 className="mt-6 text-2xl font-bold">Getting Started</h2>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Before to show the code sample we will need to start a Next.js project and
  create a Formspree account if you don’t have one yet. first visit{" "}
  <a className="text-blue-400 dark:text-blue-400" href="https://formspree.io">
    formspree website
  </a>
  , sign in and fill in your data:
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/platform_1.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={700}
    height={375}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Then in the next section is important to create a project and not a form,
  because we'll be using Formspree CLI in order to configure our project
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/platform_2.png"}
    alt={"Formspree create a project"}
    layout="responsive"
    width={700}
    height={375}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  After clicking New Project, assign any name you like and then select the
  option <span className="font-semibold">Commnad Line Project</span>
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/platform_3.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={400}
    height={450}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  At the end the platform will provide us 2 diferent important access keys, the
  first one is the <b>Project ID</b> which which will be used to access from our
  project to Formspree API, and the <b>Deploy Key</b> that we'll gonna use
  later:
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/platform_4.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={900}
    height={160}
  />
</figure>

<h2 className="mt-6 text-2xl font-bold">Up and Running with Next.js</h2>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  For this small example I'm goint to use the Next.js + TailwindCSS starter in
  order to create a custom design for the contact form, you can dive deep into
  installing Tailwind and Next.js in the{" "}
  <a
    className="text-blue-500 dark:text-blue-400"
    href="https://tailwindcss.com/docs/guides/nextjs"
  >
    official docs site
  </a>
  .
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/cli_1.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={900}
    height={110}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Open your project's directory and install the{" "}
  <code className="dark:text-black bg-gray-300 rounded-lg font-semibold px-2 py-1">
    @formspree/react
  </code>{" "}
  and Formspree CLI dependencies, with this we can setup our project correctly
  and it’s everything we'll need.
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/cli_2.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={900}
    height={180}
  />
</figure>

<h2 className="mt-6 text-2xl font-bold">Now it's time to code</h2>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  First we need to modify the{" "}
  <code className="dark:text-black bg-gray-300 rounded-lg font-semibold px-2 py-1">
    _app.js
  </code>{" "}
  file using the Formspree provider with the right project ID
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/code_1.png"}
    alt={"Medium Skeleton"}
    layout="responsive"
    width={650}
    height={400}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Before to use the Formspree hook, it's fundamental to create a{" "}
  <code className="dark:text-black bg-gray-300 rounded-lg font-semibold px-2 py-1">
    formspree.json
  </code>{" "}
  file which is the configuration file and contains information about our form,
  the email you want to use to receive the form submissions and here we can add
  other supported integrations as well. It's important don't forget to assign a
  name for this form which is the first attribute under "forms" attribute, in
  this case "contactForm". here's a small sample of a basic config:
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/code_2.png"}
    alt={"Medium Skeleton"}
    layout="responsive"
    width={650}
    height={400}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  After this let's create a component file which or where your form UI resides
  and now we can import 2 of the dependencies. In this point just{" "}
  <code>useForm</code> hook is needed, <code>ValidationError</code>
  is just provided if you don't want to handle form validation from sratch. You can
  read more about in the <a
    className="text-blue-500 dark:text-blue-400"
    href="https://help.formspree.io/hc/en-us/articles/360055613373-The-Formspree-React-library#validation"
  >
    formspree docs
  </a>
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/code_3.png"}
    alt={"Medium Skeleton"}
    layout="responsive"
    width={700}
    height={270}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Then it’s time to use the <code>useForm</code> hook, this needs only one
  parameter which is the form's name created on the{" "}
  <code className="dark:text-black bg-gray-300 rounded-lg font-semibold px-2 py-1">
    formspree.json
  </code>{" "}
  file, "contactForm" in this case. Here I'm using <code>useRef</code> hook in
  order to handle form event submission, reading the state status and reset the
  form's input fields as a side effect with the help of <code>useEffect</code>{" "}
  (this is something optional and depends on your own custom implementation)
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/code_4.png"}
    alt={"Medium Skeleton"}
    layout="responsive"
    width={700}
    height={500}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  More content here...
</p>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Open your project's directory and install the Formspree CLI dependency, with
  this we can setup our project correctly
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    className="rounded-lg"
    src={"/static/images/blog_img/nextjs-and-formspree/cli_2.png"}
    alt={"Formspree sign up"}
    layout="responsive"
    width={900}
    height={180}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  Now it’s time to use the{" "}
  <code className="bg-gray-200 dark:bg-gray-500  px-1">Hider</code> component to
  wrap the components that you need to show/hide. The first one needs to be the
  component to show and the second one the component to hide. After that, just
  provide the actual boolean status declared before to the state prop inside
  Hider:
</p>

<figure className="md:px-5 md:mt-4 md:mb-5">
  <Image
    src={"/static/images/blog_img/intro-to-react/third_line.png"}
    alt={"Medium Skeleton"}
    layout="responsive"
    width={700}
    height={430}
  />
</figure>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  I need to say that this library is capable of showing/hiding a single child
  component because Hider is based on React’s conditional{" "}
  <code className="bg-gray-200 dark:bg-gray-500 px-1">&&</code> operator too.
  You just need to worry about which elements need to be rendered or not.
</p>

<h2 className="mt-6 text-2xl font-bold">You’re Done!</h2>

<p className="break-words text-md text-left leading-relaxed text-gray-700 dark:text-white">
  And that’s everything you need to know to use React Hider inside any future
  project, Thanks for reading and feel free to contribute.
</p>
